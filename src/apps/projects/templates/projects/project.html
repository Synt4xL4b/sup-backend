{% load static %}


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="{% static './css/add-style.css' %}" rel="stylesheet">
    <link href="{% static './output.css' %}" rel="stylesheet">
</head>
<body class="bg-gray-100 h-screen flex">

<!-- Sidebar -->
<div id="sidebar"
     class="w-16 bg-gray-800 text-white flex flex-col items-center p-4 h-screen transition-all duration-300">
    <button id="sidebar-toggle" class="mb-8 focus:outline-none">
        <span class="text-xl">&#9776;</span>
    </button>
    <div class="space-y-6">
        <a href="#" class="block text-center">
            <span class="block text-2xl">üè†</span>
            <span class="hidden sidebar-text">–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#" class="block text-center">
            <span class="block text-2xl">üìä</span>
            <span class="hidden sidebar-text">–û—Ç—á–µ—Ç—ã</span>
        </a>
        <a href="#" class="block text-center">
            <span class="block text-2xl">‚öôÔ∏è</span>
            <span class="hidden sidebar-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
        </a>
        <a href="#" class="block text-center">
            <span class="block text-2xl">üßë‚Äçüíº</span>
            <span class="hidden sidebar-text">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
        </a>
    </div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
<div class="flex-1 flex flex-col">

    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <div class="bg-white shadow-md rounded-lg overflow-hidden m-2.5 w-full max-w-[800px] mx-auto">
        <!-- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –ø–∞–Ω–µ–ª–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã -->
        <div class="p-4 flex items-center justify-between">
            <h1 class="text-2xl font-bold">–¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤</h1>
        </div>

        <!-- –ü–æ–∏—Å–∫ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="p-4 flex items-center">
            <!-- –ü–æ–∏—Å–∫ -->
            <form action="?query=" method="GET" class="flex items-center">
                <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é"
                       class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500 w-1/3 mr-4"
                       name="query">
                <button type="submit" class="bg-green-custom text-white px-4 py-2 rounded hover:bg-green-dark">–ù–∞–π—Ç–∏</button>
            </form>
            <div class="flex items-center ml-auto space-x-4">
                <!-- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫ -->
                <select class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-teal-500 bg-green-custom text-white">
                    <option>50</option>
                    <option>25</option>
                    <option>100</option>
                </select>

                <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
                <div class="flex items-center space-x-2">
                    <span class="text-green-custom"></span>


                        {% if page_obj.has_previous %}
                            <a href="?page={{ page_obj.previous_page_number }}&query={{ query }}" class="bg-green-custom text-white border border-gray-300 p-2 rounded-l hover:bg-green-dark">
                                ‚ùÆ
                            </a>
                        {% endif %}

                        <span class="current">
                            –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}.
                        </span>

                        {% if page_obj.has_next %}
                            <a href="?page={{ page_obj.next_page_number }}&query={{ query }}" class="bg-green-custom text-white border border-gray-300 p-2 rounded-r hover:bg-green-dark">
                                ‚ùØ
                            </a>
                        {% endif %}

                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç" -->
                <button id="open-modal" class="bg-green-custom text-white px-4 py-2 rounded hover:bg-green-dark">
                    –°–æ–∑–¥–∞—Ç—å
                </button>
            </div>
        </div>
        <div class="overflow-x-auto">
            <table class="table-fixed">
                <thead class="bg-gray-100 text-lg">
                <tr>
                    <th class="px-4 py-3 border-b text-left w-[100px]">ID</th>
                    <th class="px-4 py-3 border-b text-left w-[300px]">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th class="px-4 py-3 border-b text-left w-[200px]">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</th>
                    <th class="px-4 py-3 border-b text-left w-[500px]">–û–ø–∏—Å–∞–Ω–∏–µ</th>
                    <th class="px-4 py-3 border-b text-left w-[150px]">–î–∞—Ç–∞</th>
                    <th class="px-4 py-3 border-b text-center w-[150px]">–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
                </thead>
                <tbody>
                {% for project in projects %}
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-4 border-b text-left">{{ project.pk }}</td>
                    <td class="px-4 py-4 border-b text-left truncate">{{ project.name }}</td>
                    <td class="px-4 py-4 border-b text-left">
                        <div class="inline-flex -space-x-2">
                            <img src="./images/icon-user-project.png" alt=""
                                 class="inline-block border border-white rounded-full w-6 h-6">
                            <img src="./images/icon-user-project.png" alt=""
                                 class="inline-block border border-white rounded-full w-6 h-6">
                            <img src="./images/icon-user-project.png" alt=""
                                 class="inline-block border border-white rounded-full w-6 h-6">
                        </div>
                    </td>
                    <td class="px-4 py-4 border-b text-left w-[500px] overflow-auto break-words whitespace-normal">
                        {{ project.description }}
                    </td>
                    <td class="px-4 py-4 border-b text-left">{{ project.created_at }}</td>
                    <td class="px-4 py-4 border-b text-center">
                        <a class="text-red-600 hover:text-red-800" href="#">
                            <svg width="18" height="19" viewBox="0 0 18 19" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.4525 7.73521L12.448 7.74151L6.02434 14.1658L7.94954 16.0903L14.3786 9.6615L12.4525 7.73521Z"
                                      fill="#0C0C0C"/>
                                <path d="M2.82559 10.9667L4.75078 12.893L11.1753 6.46872L9.24904 4.54273L2.82559 10.9667Z"
                                      fill="#0C0C0C"/>
                                <path d="M1.79594 12.4825L1.79594 12.4825C1.62626 12.6521 1.61443 12.8727 1.75194 13.0455L13.7544 25.0483C13.892 25.221 14.1132 25.2364 14.2821 25.0662L18.3345 21.2175L19.2268 20.3152L19.2268 20.3152L19.2268 20.3152L19.2283 20.3148L19.2268 20.3152L18.3345 21.2175L14.2821 25.0662L14.2817 25.0662C14.1134 25.2367 13.8917 25.2211 13.7544 25.0483L1.75194 13.0455C1.61443 12.8727 1.62626 12.6521 1.79594 12.4825Z"
                                      fill="#0C0C0C"/>
                                <path d="M16.9401 1.97525C15.5279 0.563834 13.2292 0.563834 11.817 1.97525L10.5282 3.26424L15.6521 8.38871L16.941 7.09971C18.3532 5.6874 18.3532 3.38756 16.9401 1.97525Z"
                                      fill="#0C0C0C"/>
                            </svg>
                        </a>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>


<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ -->
{% if request.user.is_authenticated %}
<div id="modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center hidden">
    <div class="bg-white p-8 rounded-lg shadow-lg w-1/2">
        <h2 class="text-xl mb-4">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h2>
        <form method="post" action="{% url 'projects:create_project' %}">
            {% csrf_token %}
            <div class="mb-4">
                <label for="{{ form.name.id_for_label }}" class="block text-sm font-medium text-gray-700">–ù–∞–∑–≤–∞–Ω–∏–µ
                    –ø—Ä–æ–µ–∫—Ç–∞</label>
                {{ form.name }}
            </div>
            <div class="mb-4">
                <label for="{{ form.descriptions.id_for_label }}" class="block text-sm font-medium text-gray-700">–û–ø–∏—Å–∞–Ω–∏–µ
                    –ø—Ä–æ–µ–∫—Ç–∞
                </label>
                {{ form.description }}
            </div>
            <div class="mb-4 flex">
                <div class="w-1/2 pr-2">
                    <label for="{{ form.status.id_for_label }}"
                           class="block text-sm font-medium text-gray-700">–°—Ç–∞—Ç—É—Å*
                    </label>
                    {{ form.status }}
                </div>
                <div class="w-1/2 pl-2 custom-select">
                    <label for="{{ form.participants.id_for_label }}" class="block text-sm font-medium text-gray-700">–£—á–∞—Å—Ç–Ω–∏–∫–∏*
                    </label>
                    {{ form.participants }}
                </div>
            </div>
            <div class="mb-4">
                <label for="{{ form.created_at.id_for_label }}" class="block text-sm font-medium text-gray-700">–î–∞—Ç–∞
                </label>
                {{ form.created_at }}

            </div>
            <div class="flex justify-end space-x-2">
                <button id="delete-project" type="button"
                        class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">–£–¥–∞–ª–∏—Ç—å
                </button>
                <button id="close-modal" type="button"
                        class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-700">–û—Ç–º–µ–Ω–∞
                </button>
                <button type="submit" class="bg-green-custom text-white px-4 py-2 rounded hover:bg-green-dark">–°–æ–∑–¥–∞—Ç—å
                </button>
            </div>
        </form>
    </div>
</div>
{% endif %}


<!-- –ü–æ–ø–∞–ø –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
<div id="confirm-delete-popup" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center hidden">
    <div class="bg-white p-8 rounded-lg shadow-lg w-1/3">
        <h2 class="text-lg mb-4">–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω</h2>
        <div class="flex justify-end space-x-2">
            <button id="confirm-delete" type="button" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                –£–¥–∞–ª–∏—Ç—å
            </button>
            <button id="cancel-delete" type="button" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-700">
                –û—Ç–º–µ–Ω–∞
            </button>
        </div>
    </div>
</div>
<script src="{% static './script/script.js' %}"></script>

</body>
</html>